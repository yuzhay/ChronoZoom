var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},CZ;(function(n){(function(t){var i=function(t){function i(n,i){t.call(this,n,i),this.saveButton=n.find(i.saveButton),this.usernameInput=n.find(i.usernameInput),this.emailInput=n.find(i.emailInput),this.agreeInput=n.find(i.agreeInput),this.initialize()}return __extends(i,t),i.prototype.validEmail=function(n){return String(n).search(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,4}$/)!=-1},i.prototype.validUsername=function(n){return String(n).search(/^[a-z0-9\-_]{4,20}$/i)!=-1},i.prototype.initialize=function(){var t=this,i=n.Service.getProfile();i.done(function(n){n.DisplayName!=null&&(t.usernameInput.val(n.DisplayName),n.DisplayName!=""&&(t.usernameInput.prop("disabled",!0),t.agreeInput.attr("checked",!0),t.agreeInput.prop("disabled",!0)),t.emailInput.val(n.Email))}),this.saveButton.click(function(){var i=t.validUsername(t.usernameInput.val());if(!i){alert("Provided incorrect username, \n'a-z', '0-9', '-', '_' - characters allowed only. ");return}if(i=t.validEmail(t.emailInput.val()),!i){alert("Provided incorrect email address");return}if(i=t.agreeInput.prop("checked"),!i){alert("Please agree with provided terms");return}n.Service.putProfile(t.usernameInput.val(),t.emailInput.val()).then(function(){self.close()},function(n){alert("Unable to save changes. Please try again later."),console.log(n)})})},i.prototype.show=function(){t.prototype.show.call(this),this.activationSource.addClass("activeButton")},i.prototype.close=function(){this.isCancel&&n.Authoring.mode==="profile",this.container.hide("slow",function(){}),n.Authoring.isActive=!1,this.activationSource.removeClass("activeButton")},i}(n.UI.FormBase);t.FormEditProfile=i})(n.UI||(n.UI={}));var t=n.UI})(CZ||(CZ={}))